<!DOCTYPE HTML>
<!--
	Helios by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Firmware - Meet Janis</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body class="no-sidebar">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header">

					<!-- Inner -->
						<div class="inner">
							<header>
								<h1><a href="index.html" id="logo">Janis</a></h1>
							</header>
						</div>

					<!-- Nav -->
						<nav id="nav">
							<ul>
								<li><a href="index.html">Home</a></li>
								<li><a href="about.html">About</a></li>
								<li>
									<a href="design-by-subteam.html">Design by Subteam</a>
									<ul>
										<li><a href="mechanical.html">Mechanical</a></li>
										<li><a href="electrical.html">Electrical</a></li>
										<li><a href="firmware.html">Firmware</a></li>
										<li>
										</ul>
								<li><a href="budget.html">Budget</a></li>
								<li><a href="blog.html">Blog</a></li>
								<li><a href="meet-the-team.html">Meet the Team</a></li>
							</ul>
						</nav>

				</div>

			<!-- Main -->
				<div class="wrapper style1">

					<div class="container">
						<article id="main" class="special">
							<header>
								<h2>Firmware</h2>
							</header>
							<p>
								The source code that runs Janis can be found in our <a href="https://github.com/bishiguro/TwistedWaveInstallation">Github repository</a> within the Current Interaction/janis folder.  The firmware is run on an Arduino Uno and is written in the Arduino programming language.
							</p>
							<p>
								Janis has two modes.  By default, she tells time with her 12 paddles.  When any of her sensors detects  someone, however, she pauses and instead moves her paddles in response to that person.  The orientations of the paddles are controlled by servos.  The state of the system is represented with a C++ structure that holds a list of the current servo positions and a list of directions in which each servo is sweeping.  A list of boolean values keeps track of whether each sensor is currently detecting someone or not.
							</p>
							<p>
								When Janis starts, the 12 servos are attached to PWM Arduino pins, their positions are set to zero, and we set an initial time from which to start the clock using the <a href="http://playground.arduino.cc/code/time">Arduino Time library</a>.  At the beginning of every loop, Janis reads the input values of each sensor to see if any of them reads a value that exceeds our threshold of 200.
							</p>
								<header>
									<h3>Interaction Mode</h3>
								</header>
							<p>
								If any of the sensors read such a value, the paddles stop telling time and sweep to the 0 degree position.  The two paddles that correspond to each detecting sensor sweep to the 90 degree position for a minimum of 80 cycles and until the person has moved away.  To rotate a paddle, we increment or decrement its position by 1, depending on the direction it is sweeping, each iteration of the loop that Janis detects someone.  If the servo reaches the 0 degree or the 90 degree mark, it switches its direction of motion.  To write new positions to the servos, we use the <a href="https://www.arduino.cc/en/Reference/Servo">Arduino Servo library</a>.
							</p>

								<header>
									<h3>Time Telling Mode</h3>
								</header>
						     <p>
						     	If none of the sensors detect someone in front of Janis, we direct the servos to display the current time instead.  Janis has twelve paddles, so we can represent both each hour and each five minute mark.  One o’clock and the first five minutes of the hour are both represented by the left-most paddle.  To represent the current hour, we rotate the corresponding paddle to the 0 degree mark and the remaining paddles to the 45 degree mark.  As the hour progresses, we rotate the paddle associated with the current five minute interval back and forth by 90 degrees.  When the clock advances to the next five minute mark, the previous paddles continuing rotating until the next hour rolls over.  We use the Arduino Time library to retrieve the current hour and minute based on an initial time that we set.  As mentioned above, this time-telling behavior is interrupted when any of the sensors detects someone’s presence.
						     </p>
						</article>
					</div>

				</div>

			<!-- Footer -->
				<div id="footer">
					<div class="container">
						<div class="row">

							<section class = "2u 12u(mobile)"></section>
							<!-- Posts -->
								<section class="4u 12u(mobile)">
									<header>
										<h2 class="icon fa-file circled"><span class="label">Posts</span></h2>
									</header>
									<ul class="divided">
										<li>
											<article class="post stub">
												<header>
													<h3><a href="#">Nisl fermentum integer</a></h3>
												</header>
												<span class="timestamp">3 hours ago</span>
											</article>
										</li>
										<li>
											<article class="post stub">
												<header>
													<h3><a href="#">Phasellus portitor lorem</a></h3>
												</header>
												<span class="timestamp">6 hours ago</span>
											</article>
										</li>
										<li>
											<article class="post stub">
												<header>
													<h3><a href="#">Magna tempus consequat</a></h3>
												</header>
												<span class="timestamp">Yesterday</span>
											</article>
										</li>
									</ul>
								</section>

							<!-- Photos -->
								<section class="4u 12u(mobile)">
									<header>
										<h2 class="icon fa-camera circled"><span class="label">Photos</span></h2>
									</header>
									<div class="row 25% no-collapse">
										<div class="6u">
											<a href="#" class="image fit"><img src="images/pic10.jpg" alt="" /></a>
										</div>
										<div class="6u">
											<a href="#" class="image fit"><img src="images/pic11.jpg" alt="" /></a>
										</div>
									</div>
									<div class="row 25% no-collapse">
										<div class="6u">
											<a href="#" class="image fit"><img src="images/pic12.jpg" alt="" /></a>
										</div>
										<div class="6u">
											<a href="#" class="image fit"><img src="images/pic13.jpg" alt="" /></a>
										</div>
									</div>
								</section>
							<section class = "2u 12u(mobile)"></section>


						</div>
						<hr />
						<div class="row">
							<div class="12u">
				<!-- Contact -->
					<section class="contact">
						<header>
							<h3>Janis: An interactive art exhibit and timepiece</h3>
						</header>
						<p>A project for Principles of Engineering completed by 5 students at Olin College of Engineering.</p>
					</section>

				<!-- Copyright -->
					<div class="copyright">
						<ul class="menu">
							<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
						</ul>
					</div>
				</div>

						</div>
					</div>
				</div>

		</div>
		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.onvisible.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>